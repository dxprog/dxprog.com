<!DOCTYPE html>
<html><head><title>Archives - Page 161</title><link rel="stylesheet" type="text/css" href="static/css/index.css"/></head><body><section class="article-list"><article><h2>Ajax and the User Experience</h2><time>November 12, 2009</time><div><p>The code running this website is well over a year old now and, as I&#39;ve gone back to upgrade/fix things, I&#39;ve noticed that it is clunky and highly inflexible. The implementation I&#39;ve used is actually very, very similar to what I used in YPNgine back in 2003; a switch statement calling functions from an included script based upon variables passed in the query string. Granted, there&#39;s going to be some degree of that in any implementation, but through some tinkering with the music page and interviewing with some of the developer&#39;s at Digg has led me to a new paradigm: a set RESTful API calls independent of all front end management.</p>
<p>Now, aside from the nice code separation and simplification of feature adds and maintainability this provides, it also opens up a new world to Ajax. Since all the data is accessible via query string, almost all the usual functionality that would normally call for separate pages can be added in without ever having to leave the landing page. In fact, I&#39;ve <a href="http://dxprog.dyndns.org/dxsite2">implemented this</a> functionality on the test server. As interesting as this may sound, it raises some interesting issues concerning usability and the user experience.</p>
<p>The largest concern is that of site navigation or, more specifically, navigation history. In a normal site, every page you visit will be added to the site history, appending itself to the not only pages visited, but the forward and back buttons as needed. With Ajax, you have none of this. Were you to click a link to a story and have it loaded via Ajax, your browser history does not change. Pressing the back button will take you to the previous entered URL and not the previous page because, technically, you&#39;re still on the same page. The new page won&#39;t be placed in browsing history which could make finding back a particular story particularly difficult. And, finally, because the page never changes, neither does the URL in the address bar which could lead to confusion.</p>
<p>Say you entered my site on the gallery page using the url <a href="http://dxprog.com/gallery">http://dxprog.com/gallery</a> and eventually found your way to to the June 2006 blog archives, specifically to a story about my <a href="http://dxprog.com/entry/tryin-to-survive/">life without a laptop</a>. Because the page never actually changes, the address bar will continue to read <a href="http://dxprog.com/gallery">http://dxprog.com/gallery</a> even though that content is no longer there. This would have made my retrieval of the URL for that story more difficult and, had the title not been permalinked, I wouldn&#39;t have been able to retrieve it at all.</p>
<p>Another thing to take into consideration is search engines. When Google crawls your site it doesn&#39;t have JavaScript enabled. So, unless you write duplicate functionality to generate the page before sending to the browser, none of your content will get indexed. I face this problem with the current gallery implementation; even though there is a way for me to access individual items via the query string, there are no hard links on the gallery page itself to point to them. Even if there was, all of the content is loaded on the client side so search engine spiders are just going to get a blank page devoid of content. Not a very smart idea if you want that content indexed.</p>
<p>In conclusion, when it comes to Ajax and dynamically loading content, you really have to consider carefully what should and shouldn&#39;t be dynamically loaded. Portal pages - any page with links into sub pages of the site such - are probably best left to the traditional method of loading a new page for each item. Smaller things such as paginating an entry&#39;s comments probably wouldn&#39;t hurt as much since it is an aside to the main material. Though, even then there may be something interesting you&#39;d want picked up on a search engine. It&#39;s really is a balancing act between slick functionality and overall usability.</p>
</div></article><article><h2>ID3Lib - A tag library for all seasons</h2><time>October 21, 2009</time><div><p><img src="http://images.dxprog.com/blog/id3lib.png" alt="" title="image"></p>
<p>ID3Lib [ <a href="http://dxprog.com/files/ID3Lib.zip">Download</a> ]</p>
<p>As one may have derived from previous posts, I have a <a href="http://labs.dxprog.com/smp/">project</a> the uses MP3s quite heavily. As such, retrieving tag data from these is quite an important thing. Having recently migrated my personal server to Windows, I needed a non-Linux variant of my previous <a href="http://dxprog.com/entry/building-a-web-based-media-player---part-1/">tag read</a>. I thought that while I was at it I could add an additional feature, namely saving embedded album art. Unfortunately, I was unable to find any clear directions on how to do so using <a href="http://developer.kde.org/~wheeler/taglib.html">TagLib</a>, so I created my own library. Three different times. In three different languages. A C++ version, a .NET version and, finally, a PHP version.[break]</p>
<p>Each of these libraries works pretty similar, but to give you the general idea, I&#39;ll write out a simple program for each.</p>
<pre><code class="lang-c++">#include &lt;iostream&gt;
#include &quot;id3lib.h&quot;

using namespace std;

void main () {
    ID3Lib id3(&quot;my.mp3&quot;); // Create the object
    if (!id3)
        cout &lt;&lt; &quot;Unable to parse file&quot;;
    else {
        cout &lt;&lt; &quot;Title: &quot; &lt;&lt; id3.artist() &lt;&lt; &quot;n&quot;; // Output title using shortcut method
        cout &lt;&lt; &quot;Album: &quot; &lt;&lt; id3.tag(&quot;TALB&quot;) &lt;&lt; &quot;n&quot;; // Can retrieve any tag with this method
        id3.saveAlbumArt (&quot;album_art.jpg&quot;); // Save any embedded picture
    }
}
</code></pre>
<p>[code=c#]using System;
using System.Collections.Generic;
using System.Text;
using Id3Lib_Net;</p>
<p>namespace Id3LibNet_Test
{
    class Program
    {
        static void Main(string[] args)
        {
            Reader t = new Reader(&quot;my.mp3&quot;); // Load the MP3 file
            Console.WriteLine(t.title()); // Print out the title using shorthand method
            Frame album = t.getFrame(&quot;TALB&quot;); // All loaded tags can be retrieved this way
            t.savePicture (&quot;album_art.jpg&quot;);
        }
    }
}[/code]</p>
<pre><code class="lang-php">include (&quot;id3lib.php&quot;);

$id3 = new ID3Lib (&quot;my.mp3&quot;); // Create the ID3Lib object
if (!$id3-&gt;getErr()) { // Will be null if load was successful
    echo (&quot;Title: &quot;.$id3-&gt;title); // A shortcut for getting the title
    echo (&quot;Album: &quot;.$id3-&gt;tags-&gt;TALB); // All tags can be accessed this way
    $id3-&gt;savePicture (&quot;album_art.jpg&quot;); // Saves an embedded picture
}
else
    echo (&quot;There was an error opening the MP3: &quot;.$id3-&gt;getErr());
</code></pre>
<p>Each library includes a set of methods/properties for the following common tags: title, album, artist, disc, track, year.</p>
<p>All three libraries are licensed under the GPLv3 and have the original source code, so you can do with them what you wish, though credit and a link back here is always nice :-).</p>
<p>ID3Lib [ <a href="http://dxprog.com/files/ID3Lib.zip">Download</a> ]</p>
<p>Disclaimer: I have only tested these on MP3s I have available to me, so it&#39;s very possible that you may have issues with this library. If you do, please leave a comment and I&#39;ll update the libs accordingly.</p>
</div></article></section></body></html>