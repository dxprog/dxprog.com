<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Archives - Page 8 - Matt Hackmann</title><link rel="stylesheet" type="text/css" href="https://dxprog.com/static/css/index.css"/></head><body><section class="rollup-page"><section class="intro-bar intro-bar--small"><img src="https://dxprog.com/static/images/me.jpg" alt="Matt Hackmann" class="intro-bar__photo"/><h1 class="intro-bar__header"><a href="https://dxprog.com/" title="Back to home" class="intro-bar__home-link"><span class="intro-bar__name intro-bar__name--first">Matt</span><span class="intro-bar__name intro-bar__name--last">Hackmann</span></a></h1><h2 class="intro-bar__subhead">The thoughts and goings-on of some programmer dude.</h2><nav class="intro-bar__social-nav"><ul class="social-links"><li class="social-links__item"><a class="social-links__link social-links__link--rss" target="_blank" href="http://feeds.feedburner.com/dxprog">RSS Feed</a></li><li class="social-links__item"><a class="social-links__link social-links__link--github" target="_blank" href="https://github.com/dxprog">GitHub</a></li><li class="social-links__item"><a class="social-links__link social-links__link--twitter" target="_blank" href="https://twitter.com/dxprog">Twitter</a></li><li class="social-links__item"><a class="social-links__link social-links__link--linkedin" target="_blank" href="https://www.linkedin.com/in/mhackmann">LinkedIn Profile</a></li></ul></nav></section><section class="article-list"><article class="post"><header class="post__header"><h1 class="post__title"><a href="https://dxprog.com/entry/2016-blog-challenge">チャレンジ</a></h1><time class="post__published">November 2, 2016</time></header><div class="post__content"><p>I doubt that title&#39;s even gonna render correctly...</p>
<p>Let&#39;s not beat around the bush, here: this blog has been a fucking ghost town for quite some time now. Last year was quiet, but the only thing I&#39;ve written at <em>all</em> this year is an out-of-nowhere post about a frog watering contraption. Kind of sad, really. It&#39;s not that I don&#39;t have anything to write about, necessarily, but can&#39;t quite figure out the &quot;correct&quot; way to write it. One thing leads to another, and that generally lead to nothing in the end.</p>
<p>That brings us to here. At the suggestion of my <a href="http://mom28kids.com/2016/11/blog-throwdown-2016/">dearest mother</a>, we&#39;ll be doing one of those post-a-day challenges for the month of November. She&#39;s started off by writing about how she&#39;s slowly becoming an evening alcoholic (I kid, I kid), but I&#39;m not sure where to begin.</p>
<p>2016 has been a rather strange year, for sure. It might actually be one of my busiest on record, but it doesn&#39;t really feel like I&#39;ve accomplished anything. Here&#39;s a bulleted list of things that may or may not become posts later:</p>
<ul>
<li>Spent a couple weekends in snowy Tahoe with friends</li>
<li>Threw not one, but <em>two</em> little parties at my apartment</li>
<li>Quit LinkedIn</li>
<li>Visited Japan</li>
<li>Started working at Twitch</li>
<li>Quit working at Twitch</li>
<li>Meandered around in unemployment for a while</li>
<li>Started working at LinkedIn again</li>
<li>Made a road trip to Seattle, visiting friends and family along the way</li>
<li>Housed a friend and colleague from work for a week</li>
<li>Various other ancillary things</li>
</ul>
<p>The work nonsense is certainly the &quot;low hanging fruit&quot; of this blog escapade, so I&#39;ll probably start on that tomorrow.</p>
<p>In the meantime, this is a post with words that hasn&#39;t really said anything in particular. Good thing this is a quantity and not quality challenge!</p>
</div></article><article class="post"><header class="post__header"><h1 class="post__title"><a href="https://dxprog.com/entry/the-automated-warner-waterer">The Automated Warner Waterer</a></h1><time class="post__published">September 1, 2016</time></header><div class="post__content"><p><a href="https://www.youtube.com/watch?v=R0EhqLACsw4&amp;youtube-thumb"><img src="https://img.youtube.com/vi/R0EhqLACsw4/0.jpg" alt="youtube video"></a></p>
<p>Out of nowhere, a blog post!</p>
<p>I&#39;m currently in possession of my brother&#39;s frog whilst he gets his new life set up. I love the little guy (the frog, not my brother), so I&#39;m okay with this. The only downside is that it does keep me attached to my place to care for him (again, the frog) at a time in my life where I can do whatever the hell I want whenever the hell I want.</p>
<p>To that last point, I booked a rather spur of the moment trip to visit good ol&#39; <a href="http://dxprog.com/comic/dark-over-light/">devbus</a> over the long weekend. Now, the frog (who from hereon out will be referred to as &quot;Warner&quot;) can live with some neglect, particularly on the food side of things. I&#39;ll only be gone four days, which should be fine. Still, he should be kept moist regularly and that&#39;s been weighing on my soul.</p>
<p>Enter the Automated Warner Waterer! (Or, &quot;aww&quot; for short)</p>
<h2 id="the-supplies">The Supplies</h2>
<p><img src="https://cdn.awwni.me/tu48.jpg" alt="" title="SUPPLIES!"></p>
<ul>
<li>One small fountain pump (picked up at Home Depot)</li>
<li>Some 1/4&quot; tubing</li>
<li>Plugs for said tubing</li>
<li>One Raspberry Pi (I used a 3)</li>
<li>One <a href="http://dxprog.com/entry/christmas-lights-extravaganza/">reused, relay-controlled gangbox</a></li>
</ul>
<p>Excluding the Pi and the box which I already had, I spent about $25 for everything. Not too shabby. Oh, and this isn&#39;t meant to be a blog-by-blow tutorial. I&#39;m not instructables...</p>
<h2 id="building-it">Building It</h2>
<p><img src="https://cdn.awwni.me/tu4b.jpg" alt="" title="If you look real closely, you can see Warner"></p>
<p>The water pump and tubing stuff came together pretty easily, the stuff that I figured would be difficult. Despite it being drip tubing, I wound up punching some holes as the pump wasn&#39;t strong enough to force the water through. Other than that, cake all the way.</p>
<p><img src="https://cdn.awwni.me/tu49.jpg" alt="" title="So much wires"></p>
<p>Setting up the script and such to control it via the Raspberry Pi turned out to be trickier, or the part I figured would be easy. Some stuff I learned:</p>
<ul>
<li>The Pi has 5v out, which is great for my relay card. But the GPIO pins are only 3.3v, something my relay card did <em>not</em> like. An NPN transistor fixed this.</li>
<li>The relays themselves are active when they&#39;re pulled low, something I do not recall when messing with them before. Had to do some rewiring so that the pump would be off when the relay is engaged (which is basically all the time when the Pi is on). This of course means that if the Pi loses power, that pump will always be on.</li>
<li>When running something as a cron job, you don&#39;t get the benefits of running with that user&#39;s shell. So, when you run node, you need to absolute path to that</li>
</ul>
<h2 id="the-result">The Result</h2>
<p><img src="https://cdn.awwni.me/tu4a.jpg" alt="" title="The business end"></p>
<p>The way everything is set up now, I can manually water Warner by running the script through SSH, but it&#39;s also set to water for fifteen seconds every day at 3PM. In addition to that, it will reboot the Pi at 3:01PM, resetting the GPIO pins and shutting off the pump just in case something went wrong and the script hung with the pump on. MY CODE HAS LIVES IN THE BALANCE.</p>
<p>A pretty good way to spend half a day and it&#39;ll make me feel more at ease while I&#39;m away.</p>
</div></article><article class="post"><header class="post__header"><h1 class="post__title"><a href="https://dxprog.com/entry/the-yearly-time-travel-trip">The Yearly Time Travel Trip</a></h1><time class="post__published">December 20, 2015</time></header><div class="post__content"><p>As has now become a yearly tradition, words from my past self to my present day self arrived this 21st of December. Here is what I had to say.</p>
<blockquote>
<p>Dear FutureMe,</p>
<p>Here we are once again. We&#39;ll skip the pleasantries and get right to the heart.</p>
<p>To be quite honest, I&#39;m a bit apprehensive about how next year is going to go down, at least as far as work goes. Being understaffed and rewriting the entire stack in the time the PMs are allotting is worrisome to be sure. I&#39;m hoping that there will be no long nights (certainly impossible odds), but the realist in my is not optimistic.</p>
<p>I am, however, slightly more optimistic about that trip to Japan with your coworkers. The tickets are soon to be bought as I write this which will essentially seal three people into that deal. How things will play out while there, though, remains a bit shaded to me.</p>
<p>Speaking of Japan, don&#39;t really expect anything to come of the 3 month work stint over there, but it would certainly be nice. Oh, and this is of course assuming that you&#39;re still at LI, though I can&#39;t see any reason why you wouldn&#39;t be. That gig, though the honeymoon is over, is still pretty sweet.</p>
<p>On the girlfriend front... sigh... I can&#39;t really make any predictions. I&#39;ve become disillusioned with the effectiveness of online dating as it doesn&#39;t pair you up with a person in any natural sort of way. Maybe with that senior promotion (presumably that&#39;ll happen sooner rather than later), you&#39;ll get some extra confidence and balls and can converse with ladies on a &quot;cold call&quot; type basis.</p>
<p>It seems these letters are getting longer each year I write them, so the wrapping shall begin here.</p>
<p>Oh, you need to bike over 2000 miles next year and get your fat body into shape. Please do that for me.</p>
</blockquote>
<p>This is probably the most accurate thing I&#39;ve written to date. Project Voyager, which I played a marginally large-ish role in for a while (lead web developer for the new &quot;Me&quot; page), was an absolute nightmare to work on, and continues to be in some cases. Any project that has people tossing out the term &quot;PTSD&quot; for those who have abandoned ship is not one that should be praised too heavily. In the initial stages, I did a lot of actual yelling in anger and frustration in trying to keep the expectations sane. During the course of the year, I entered what was probably actually some level of depression. I nearly stopped doing things after work at all, trying to keep what time I wasn&#39;t at work to myself just to recover so I could go and face it again the next day or week. In the end, I bailed from the project entirely (in the most hush-hush way I could, except for the long essay I wrote to managers about my thoughts on the mess). I attempted to flee to Facebook, making it all the way through the interview process only to be turned down, so instead just went to a different team which still has me working tangentially on Voyager. It&#39;s much calmer and saner overall and I&#39;m slowly beginning to return to &quot;normal&quot;, whatever that is.</p>
<p>Japan is a thing that happened, though, with a couple of work friends and myself making a pilgrimage to my home away from America. I&#39;d like to say that this trip was way more successful than the one my brothers and I took. We went to more places, saw more stuff, and ate a larger variety of food. We hung out with the fine folk at the Tokyo LinkedIn office, who are exceptionally good at partying (from karaoke to playing wingman in Ropongi bars). To that last point, I had every opportunity to nail a drunk Japanese chick, but even my level of inebriation did not allow me miss the last train back to our hotel (our flight was the next day). Of course, I came back with all manner of used figures and such to adorn my various shelves.</p>
<p>Yeah, the girlfriend thing continues to elude me. I went on a couple-ish dates this year, but neither I didn&#39;t consider to be enough of a personality fit to continue pursuing (or other various circumstances). 2016 is the year I want to turn my lack of love life around (which is the equivalent of saying it&#39;ll be the year of the Linux desktop) because I&#39;m getting bummed out watching everybody around me get married and have kids.</p>
<p>Finally, I think I biked six or seven hundred miles this year. Nothing to write home about after the 1800 I biked last year. I&#39;m fatter than ever, but I think I&#39;ve fleshed out a nice little plan for once the holidays and their gluttonous wiles have played out. Getting into shape will play heavily into the dating thing, methinks.</p>
<p>And with that, I will now go and pen the letter I will be reading and writing about next year.</p>
</div></article><article class="post"><header class="post__header"><h1 class="post__title"><a href="https://dxprog.com/entry/a-thought">A Thought</a></h1><time class="post__published">November 13, 2015</time></header><div class="post__content"><p>I don&#39;t like talking about things in the political or socio-economic realm. I abhor it, even. A couple reasons, A) I&#39;m bad at it, B) it requires an emotional component that I don&#39;t have enough of. That said, I&#39;m going to make a societal rant.</p>
<p>I of course am going to be speaking of the recent unpleasantness going down in France. I&#39;ve been quasi-monitoring various threads on reddit and - unsurprisingly - it would seem the collective world&#39;s head is turned to look at Islam (or, rather, Muslims) as being the cause. Now, I wouldn&#39;t be surprised if extremists who claim to be working in the name of this religion are involved, but that&#39;s not why I&#39;m here. Well, I suppose it is. A lot of the sentiment seems to be around the notion that this particular religion is <em>making</em> people do this.</p>
<p>No. No it&#39;s not. And the people who claim this are themselves probably hypocrites.</p>
<p>I had an interesting thought as I was grabbing a piece of cheese from the fridge. It&#39;s the exact same argument as &quot;video games make those who play them violent&quot;. I&#39;ve written about this before, maybe here, maybe for school, but the answer is: no, of course they don&#39;t. A video game, movie, book, or piece of music doesn&#39;t make you violent. If you&#39;re acting out on things, you were probably pre-disposed to such things already. The <em>exact same idea</em> applies to this notion that a religion will turn somebody violent.</p>
<p>These individuals <em>chose</em> to kill of their own free will. We as humans kind of have that privilege.</p>
<p>In the end it&#39;s not video games and it&#39;s not religion causing people to cause fucked up mayhem against innocent lives. It&#39;s extremely disturbed individuals who will find any reason to validate the horrendous crimes they already want to commit. Intangible concepts don&#39;t cause people to kill.</p>
<p>People do that all by themselves.</p>
<p>And it goes without saying that they are acting and representing themselves and themselves only, not the whole. They may represent a subset of people, but simply by being human, they actually represent all people.</p>
<p>So, if you subscribe to the group mindset, does that not make all of us murderers?</p>
</div></article><article class="post"><header class="post__header"><h1 class="post__title"><a href="https://dxprog.com/entry/idiocy-caching-and-reducing-round-trips">Idiocy, Caching, and Reducing Round Trips</a></h1><time class="post__published">July 7, 2015</time></header><div class="post__content"><p>Over the last few days, I&#39;d been receiving high CPU usage alerts from my host. A tad perplexed, I&#39;d login in, check the graph and logs to see that, indeed, CPU usage was high, but nothing really seemed out of the ordinary. Google Analytics showed that traffic was moderately high, to be expected with a few widely visible brackets going on in /r/anime, but it wasn&#39;t anything to raise an eyebrow at. Still, you can&#39;t look at the following graph and notice a very predictable period of high activity:</p>
<p><img src="http://i.imgur.com/0IUrapB.png" alt="" title="Those peaks would be terrible to bike up"></p>
<p>These peaks were actually coinciding with the most prominent bracket updating, bringing with it a fresh wave users every day. By the time I had received the third CPU alert email, I knew something was up and decided to actually take a look. Luckily, I didn&#39;t have to look far. The MySQL query graph was showing 1000+ read queries per second, certainly out of ordinary given how aggressive I am about caching.</p>
<p>Suspecting that something might be awry with memcache, but not actually wanting to bounce it, I bugged the cache library with some <a href="https://github.com/dxprog/anime-bracket/commit/9e96a5838d06e0d3fc034cbc08653ab3329c8c5f">stats tracking</a> hoping that it would turn up something I had overlooked. Indeed, I know where things are cached, but have never really had a list of just how all of this looks in production. And, true to that, I found something that I had not anticipated: every call to Dal::getById - a method on a class that database models extend - was a cache miss. Every. Single. One. And there were thousands of these, which very quickly explained the high query volume. All of this I found out in about 30 seconds of having that profiling code live, which is good because it also brought the site down and I had to disable it...</p>
<p>With that information, I had a pretty solid lead as to where I needed to be checking for issues: the aforementioned getById method. I was a bit baffled because I knew there should be caching on that, it&#39;s one of the two reasons that the method even exists (the other reason being for coding simplicity). So I get in there and take a look. Lo and behold, the cache is checked but <a href="https://github.com/dxprog/anime-bracket/commit/5455f8bc589e4f924714463857c8b8cf64eecb37">nothing was ever actually stored back</a>. Of course, I had to fuck the fix up once before <a href="https://github.com/dxprog/anime-bracket/commit/46618c77c0cf58a9f8555f05f86a413817bb3069">actually resolving it</a>.</p>
<p>Once that was shoved to production, I was greeted with this wonderful little sight:</p>
<p><img src="http://i.snag.gy/bGki8.jpg" alt="" title="Down.. down.. down.. ROCK LOBSTER"></p>
<p>So, the immediate issue was fixed, but there was still something obviously very wrong if I was individually getting so many singular items by ID. As it turns out, in one of the most looped pieces of code in the entire project, I was making not one but <em>two</em> calls to get an item by ID. The whole output was cache guarded, but on a per user basis. In the case of the popular running bracket, that&#39;s over 400 queries per user per page generation. Unacceptable.</p>
<p>So, in one of those cases of code brevity != code speed, <a href="https://github.com/dxprog/anime-bracket/commit/dd6a4251c94ca47454abd6a004c2d64c952664da">I did a heavy refactor to stash all the IDs that needed to be fetched and then make a big batch call later</a>. There are some trade-offs here. There&#39;s still room for optimization here, especially if the getById calls are aggressively cached (indeed, the data fetched changes rarely). Or, the data returned from the batched call could be cached in shorter intervals. It still needs to be looped through as it&#39;s decorated with user specific data, but that would bring the overhead down to one big-ish hit only every few minutes. Still, with those measures currently in place, the CPU load issue has gone away and the queries per second is generally down in the double digits on average.</p>
<p>The true sign that everything is working, though, was the lack of an email in my inbox this afternoon.</p>
</div></article><div class="paging"><a href="https://dxprog.com/archives/9" class="paging__link paging__link--next">Earlier Posts</a><a href="https://dxprog.com/archives/7" class="paging__link paging__link--previous">Later Posts</a></div></section><footer class="footer"><p class="footer__copyright">Copyright © 2018 Matt Hackmann</p><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-280226-1"></script><script src="//dxprog.com/static/js/dxprog.js"></script></footer></section></body></html>