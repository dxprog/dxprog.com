<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Archives - Page 16</title><link rel="stylesheet" type="text/css" href="http://staticr.dxprog.com/static/css/index.css"/></head><body><section class="rollup-page"><section class="intro-bar intro-bar--horizontal"><img src="http://staticr.dxprog.com/static/images/me.jpg" alt="Matt Hackmann" class="intro-bar__photo"/><h1 class="intro-bar__header"><span class="intro-bar__name intro-bar__name--first">Matt</span><span class="intro-bar__name intro-bar__name--last">Hackmann</span></h1><h2 class="intro-bar__subhead">The thoughts and goings-on of some programmer dude.</h2><nav class="intro-bar__social-nav"><ul class="social-links"><li class="social-links__item"><a class="social-links__link social-links__link--rss" target="_blank" href="http://feeds.feedburner.com/dxprog">RSS Feed</a></li><li class="social-links__item"><a class="social-links__link social-links__link--github" target="_blank" href="https://github.com/dxprog">GitHub</a></li><li class="social-links__item"><a class="social-links__link social-links__link--twitter" target="_blank" href="https://twitter.com/dxprog">Twitter</a></li><li class="social-links__item"><a class="social-links__link social-links__link--linkedin" target="_blank" href="https://www.linkedin.com/in/mhackmann">LinkedIn Profile</a></li></ul></nav></section><section class="article-list"><article class="post"><header class="post__header"><h1 class="post__title"><a href="http://staticr.dxprog.com/entry/edge-cases">Edge Cases</a></h1><time class="post__published">October 4, 2013</time></header><div class="post__content"><p>I&#39;m grasping at straws on what I should post, especially given that I have thirty minutes to write something. I thought I was doing well by actually <em>having</em> a post whereas my dear sweet mother had not, but a quick check reveals <a href="http://mom28kids.com/2013/10/oh-crap-i-have-to-write-another-post/">that she&#39;s on top of her game</a>, probably with quality.</p>
<p>Browsing through my pictures folder, I came across a few things involving redditbooru&#39;s reverse image search. At this point, the thing is an essential tool for the /r/awwnime sub, and when it doesn&#39;t work, I get notified. I&#39;ve <a href="http://dxprog.com/entry/a-cute-world-of-programming-possibilities/">mentioned before</a> that the image analysis is entirely color based, no edge or corner detection or anything like that. So, when somebody brings up something and my human mind is all &quot;huh, it seems like that should have matched&quot;, I&#39;m invariably sent down a rabbit hole of figuring shit out.</p>
<p><img src="http://cdn.awwni.me/mhf9.jpg" alt="" title="Taiga..."></p>
<p>This was the first one I had to deeply investigate. The one on the left was the original, repost on the right. It should be noted that the right picture was also animated. The images are squashed because all images are resized to 256x256 to help normalize things, especially useful for taking into account resized pictures. But, the image search failed to pick up on this for a couple reasons: A) the gif is ever so slightly brighter, probably due to the color quantization. Actually, that&#39;s really the only thing. The ever so slight facial expression difference would almost certainly be picked up if the color space was the same.</p>
<p>We had some discussion on the thread about whether testing against greyscale would be any help, but the difference was enough that it didn&#39;t bring the matches any closer.</p>
<p><img src="http://cdn.awwni.me/mhfa.jpg" alt="" title="Skyfaaaaall"></p>
<p>This one was fun. The above picture is the original, the repost I have no idea where it is, but I have some explanation images.</p>
<p><img src="http://cdn.awwni.me/mhfb.jpg" alt="" title="Slight differences"></p>
<p>The left side in this case is the repost and you can tell that there are some slight differences in both form and colors, certainly enough to throw off the image search. What I had trouble wrapping my mind around was that these were clearly two different images, but which one was the original and why was there one slightly different.</p>
<p><img src="http://cdn.awwni.me/mhfc.png" alt="" title="Overlayed comparison"></p>
<p>Turns out, the slightly shittier left version (not saying it&#39;s shitty, it&#39;s certainly kicking my ass and most of my other body parts at art) was somebody copying the original in an attempt to improve their art skills.</p>
<p>That&#39;s cool. I&#39;ve been there too.</p>
</div></article><article class="post"><header class="post__header"><h1 class="post__title"><a href="http://staticr.dxprog.com/entry/novels-novels-novels">Novels, Novels, Novels</a></h1><time class="post__published">October 3, 2013</time></header><div class="post__content"><p>I thought I&#39;d post today about what novels I am currently reading.  I’ll also include the read-alouds I&#39;m doing with the four hundred college kids since I am actually reading those.</p>
<h2 id="school-read-alouds-">School Read Alouds:</h2>
<p>A Presentation on Web Development at LinkedIn (for Full Sail)</p>
<h2 id="personal-reading-">Personal Reading:</h2>
<p>Attack on Titan
Game of Thrones
Puella Magi Oriko Magica</p>
<h2 id="books-i-ve-finished-reading-">Books I&#39;ve Finished Reading:</h2>
<p>Boys of Summer (an unpublished novel written by my old boss, good shit)</p>
<p>So that’s what&#39;s in piles around the house. What I&#39;m really missing right now is a good, solid nap. The only sleeping I do is about five hours overnight and my daily nap and that makes me sad. I miss those toddler/preschool/teenager days of sleeping till noon.</p>
<p>What about you – sleeping well?</p>
</div></article><article class="post"><header class="post__header"><h1 class="post__title"><a href="http://staticr.dxprog.com/entry/are-the-robots-getting-smarter">Are the robots getting smarter?</a></h1><time class="post__published">October 2, 2013</time></header><div class="post__content"><p>I was going to talk about how I used nodejs to move redditbooru off of crontab and prevent crazy CPU spikes I was seeing, but then I received this crazy recruiter email that I&#39;m still wrapping my mind around. Ever since I made the jump to Winnercomm, I&#39;ve been bombarded by a goodly number of people trying to recruit me every month. Since moving to the Valley, nothing&#39;s changed except now the companies are ones I&#39;ve heard of. But today... I received perhaps one of the more bizarre ones I&#39;ve seen yet:</p>
<p><strong>SUBJECT: You&#39;re an anime fan - I am Monica w/ [Redacted] :)</strong></p>
<blockquote>
<p>Hi Matt,</p>
<p>I am Monica, a community manager at [Redacted], a platform for finding companies that fit you. I saw that you&#39;re an anime fan-- what are your favorite shows? Are you watching anything good right now? I just finished watching Free! and really enjoyed it.</p>
<p>Also I saw that you worked at LinkedIn and did web development on the LinkedIn profile pages, emails, and horizontal JS framework migration efforts. That’s awesome! But, if you are ready for something new (along with a 25%+ salary bump) we know that JobVite needs help doing JS development along with Java backend services development. You may not have direct experience with that but I saw that you were endorsed for Java on LinkedIn and I thought it would be worth asking. :)</p>
<p>[Redacted corporate shill because they don&#39;t get free advertisement from me]</p>
<p>If I bothered you and you don&#39;t want to be contacted in the future, let me know and I will make sure we don&#39;t reach out again. I will also be happy to say I am sorry with a beer (we are partial to porters) or a coffee (black!) :) </p>
</blockquote>
<p>This has all the hallmarks of being both a handwritten letter and also one generated by a cold and unfeeling robot (though, being the Bay Area, probably a sexy one).</p>
<p>So it opens up by declaring I am an anime fan, not something like &quot;I see that you&#39;re an anime fan&quot;, just &quot;YOU ARE ANIME FAN!&quot; This is not untrue, but probably the oddest way to open a recruiting email I&#39;ve yet seen. I had originally written a sentence here about how people would know I like anime (blog/reddit account), but it&#39;s essentially plastered all over my LinkedIn profile. Still, stranger than the fact that anime was the opener was the fact that a super recent show was mentioned (<a href="http://www.crunchyroll.com/free-iwatobi-swim-club">Free!</a> just wrapped its twelve episode run last Thursday).</p>
<p>Okay, one point for not being a bot. But that all comes into question with the first sentence of paragraph two where basically every word is lifted <a href="http://www.linkedin.com/in/mhackmann">right out of my profile</a>. <a href="http://upload.wikimedia.org/wikipedia/commons/0/03/Verbatim_diskette_(2">Verbatim</a>.jpg). That&#39;s super bot like (or incredibly lazy). The rest of the paragraph is too well crafted to be a bot, especially the mention of the Java endorsement (which has a story behind it that I find rather humorous).</p>
<p>The damning piece of evidence against this being a robot (outside of the fact that it was obviously written by a human), is that GMail was kind enough to link to her Google+ account in the right rail. And, I must say, I like what I see. If what she&#39;s saying about anime and the various other nerd type things she posts on her... whatever Google+ calls a &quot;wall&quot;... are true, perhaps I should take her up on that beer/coffee offer.</p>
<p>That <em>date</em> will have nothing to do with future employment.</p>
</div></article><article class="post"><header class="post__header"><h1 class="post__title"><a href="http://staticr.dxprog.com/entry/php-events-and-the-ajax-pipeline">PHP, Events, and the Ajax Pipeline</a></h1><time class="post__published">October 1, 2013</time></header><div class="post__content"><p>Working at LinkedIn, I feel almost required to talk about coding on my blog, especially if I want to keep my <a href="http://i.imgur.com/8ALLwfP.jpg">Junior Woodchuck Engineer</a> sash.</p>
<p>Some months ago, I was trying to beef up the user feedback that <a href="http://awwnime.redditbooru.com/">redditbooru</a> would give when making requests to the server. One thing I wanted to do was, during a reverse image lookup, have a continually updating status to the user. &quot;Retrieving image&quot;, &quot;Searching database&quot;, and then the final data. This required a couple of interesting things: implementing an event model in PHP, and the not-so-talked-about third readyState value in the XMLHttpRequest response: 3, or &quot;processing request&quot;.</p>
<h2 id="php-eventing">PHP Eventing</h2>
<p>Anybody who has coded JavaScript for more than thirty minutes will understand that it runs on a highly evented model. You attach a listener to an object with a function callback, the object fires and event, and the callback is called with data provided pertaining to the event in question. PHP, being a highly linear programming language, doesn&#39;t really have such a concept baked in. Being that I wanted something that could be easily reused through out an entire project, I came up with a stupid simple <a href="https://github.com/dxprog/reddit-booru/blob/master/lib/events.php">events library</a>. Pertaining to the internal event modelling, it exposes the following two methods:</p>
<pre><code class="lang-php"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addEventListener</span><span class="hljs-params">($eventType, $callback)</span></span>;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fire</span><span class="hljs-params">($eventType, $data = null)</span></span>;
</code></pre>
<p>These work essentially as they do in JavaScript: subscribe to an event with addEventListener and provide a callback. Fire an event with fire of that event type with whatever relevant information that goes with. addEventListener is constructed such that you can add multiple callbacks for a single event, much like the sugary goodness that jQuery provides to the DOM. One possible drawback of my implementation is that the event bus is essentially global, being that all the methods are static. This means you could have naming collisions on event types. Granted, this could easily be converted into an abstract class that any class could later inherit, providing this functionality.</p>
<p>Here are a couple of quick production examples of <a href="https://github.com/dxprog/reddit-booru/blob/master/api/image.php#L215">event firing</a> and <a href="https://github.com/dxprog/reddit-booru/blob/master/controller/images.php#L199">event subscribing</a>. One half of the puzzle solved.</p>
<h2 id="sending-and-parsing-evented-json">Sending and Parsing Evented JSON</h2>
<p>As stated previously, on modern browsers, the XMLHttpRequest response has a third ready state of &quot;processing request&quot;. Essentially, this fires at certain points as the request is receiving data. We can use this to our advantage to send small status updates to the user as the backend performs numerous/long running tasks. Part of the events library are some calls to handle what I refer to as &quot;evented Ajax&quot;, though I&#39;m sure there&#39;s a real term for it. It has the following methods:</p>
<pre><code class="lang-php"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">beginAjaxEvent</span><span class="hljs-params">()</span></span>;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">endAjaxEvent</span><span class="hljs-params">()</span></span>;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sendAjaxEvent</span><span class="hljs-params">($eventType, $data)</span></span>;
</code></pre>
<p>beginAjaxEvent and endAjaxEvent do essentially what you would expect: they prime the system for sending data out in this fashion and tidy everything up necessarily. sendAjaxEvent is where all the fun happens. I&#39;m going to go through this guy line by line.</p>
<pre><code class="lang-php"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sendAjaxEvent</span><span class="hljs-params">($eventType, $data)</span> </span>{
$out = <span class="hljs-keyword">new</span> stdClass;
$out-&gt;eventType = $eventType;
$out-&gt;data = $data;
$out = json_encode($out);

<span class="hljs-comment">// Pad out the request to a minimum of 4K for Chrome</span>
<span class="hljs-keyword">if</span> (strlen($out) &lt; <span class="hljs-number">4096</span>) {
$out = str_pad($out, <span class="hljs-number">4096</span>, <span class="hljs-string">' '</span>);
}
<span class="hljs-keyword">echo</span> $out;
flush();
}
</code></pre>
<p><strong>Line 3-7</strong> - pretty simple, preparing the data that will actually be sent to the browser as a JSON response.
<strong>Line 8-11</strong> - An oddity I ran into with Chrome while developing this. Apparently, it will only fire a processing event if the data received is 4K or greater. So, to ensure that the event is fired, we pad the response out to 4K at minimum.
<strong>Line 12-13</strong> - spit out the data and flush the buffer to the browser.</p>
<p>For the power this can wield, it&#39;s pretty simple stuff. Of course, you need to be properly set up to receive this type of response on the client end. Being as I&#39;m focusing on the PHP side here, I won&#39;t go into details, but <a href="https://github.com/dxprog/reddit-booru/blob/master/view/js/scripts.js#L78">you can check out my implementation</a>. The implementation is fairly tightly coupled with how it&#39;s piped out of PHP, particularly expecting the last and largest data coming down the pipe to be an event named &quot;data&quot;. But, I have yet to receive any user complaints that this doesn&#39;t work, so that&#39;s the important part.</p>
<p>Of course, all of this is nice and all, but this particular intrigue of onreadtstatechange isn&#39;t compatible on some browsers (cough, IE, cough). For that, there are fallbacks in place to use a standard Ajax request a la jQuery. By setting &quot;evented&quot; parameter on the URL to the request, the event model can be effectively turned on or off. The internal events are ignored, and what would be sent in the data event becomes the response. It&#39;s a gracefully degrading solution to the issue. Granted, that query string parameter could go away entirely if one was to do user agent sniffing on the backend.</p>
<p>Well, that&#39;s my little write-up on what was probably an afternoon of coding. I haven&#39;t yet implemented this anywhere else, but I think that at least the events model could have some (or a lot of uses) in many day to day cases, especially if you were to start messing around with multi-threading in PHP.</p>
<p>But that&#39;s a post for another day.</p>
</div></article><article class="post"><header class="post__header"><h1 class="post__title"><a href="http://staticr.dxprog.com/entry/the-plate-and-the-amount-of-stuff-on-it">My Plate and the Amount of Stuff On It</a></h1><time class="post__published">September 29, 2013</time></header><div class="post__content"><p>My mom decided to try out my month of one blog per day thing. I couldn&#39;t just take that sitting down, so here I am in a [mother disapproved word removed]-wagging contest, a contest which really doesn&#39;t exist.</p>
<p>I love to talk about how lazy I am. For instance, sometimes when I&#39;m hungry, I&#39;ll just continue being hungry because I don&#39;t want to stare into the cupboards and figure out what to make, or I just don&#39;t want to clean all the required hardware. Or perhaps there&#39;s just no food to be had. Either way, this is a thing that happens and it certainly has all the hallmarks of laziness.</p>
<p>But to say I&#39;m lazy overall isn&#39;t really true. I am selectively lazy. When it comes to programming tasks (or anything computer related, really) I&#39;m always up to something. At the moment, I&#39;m up to a lot of things.</p>
<p><strong>Work</strong></p>
<p>I have been working on and off all weekend trying to pump out a gratuitous amount of code in a stack that I have no business touching. During one of our team meetings, I set a bar for myself by telling everybody that I would take on a beefy amount of engineering work because I feel I have to prove myself (through many discussions with the people I work with, this is apparently incorrect thinking). That&#39;s actually only part of it; it seemed like a fun challenge. And this has shown to be more or less correct, as I&#39;ve lost some hours just pounding away at the keyboard. The long compile times aren&#39;t fun, but I&#39;ve learned a fuckton of stuff, both about how your <a href="http://www.linkedin.com/in/conanobrien">LinkedIn profile page</a> is pulled together, but also a bit about Java and a bit more about OOP. Besides, those compile times are easily whiled away by playing the <a href="http://en.wikipedia.org/wiki/Star_Trek:_25th_Anniversary_(NES_video_game">Star Trek: 25th Anniversary</a>) game for NES.</p>
<p>On top of that, there&#39;s a presentation I need to write pretty damn soon. I have been chosen to pitch web development at LinkedIn to a throng of up and comings at my alma mater next month. I haven&#39;t even started on that...</p>
<p><strong>Awwnime Bracket</strong></p>
<p>Last year&#39;s awwnime bracket only got a <a href="http://dxprog.com/entry/weekend-of-productivity/">couple</a> of <a href="http://dxprog.com/entry/a-cute-world-of-programming-possibilities/">nods</a> in the blog despite eating up nearly two solid months of my life. This year it&#39;s coming back, but we&#39;re also running an additional bracket for male characters (<a href="http://www.reddit.com/r/awwnime/comments/1n5q2t/2013_boys_bracket_round_1_group_a/">which came with it&#39;s own set of problems</a>). In an attempt to make things actually manageable, I spent some time into moving all my one off shell scripts into the code base proper and writing an administrative interface around that. Additionally, I moved away from the money sucking <a href="http://cdn.awwni.me.s3.amazonaws.com/bracket/bracket_round1_groupB.jpg?v7">giant images</a> and switch to something <a href="http://bracket.awwni.me/2013-boys-bracket/view/">rendered in browser</a>. It&#39;s also much friendlier to interactiveness that way.</p>
<p><strong>Freelance</strong></p>
<p>Despite the fact that I keep promising myself I&#39;ll never freelance again, the sweet allure of &quot;free money&quot; is too much. Now, the upside is I haven&#39;t had to bust my ass on any of the one (possible two) projects in the pipeline at this point, but still, they hang over me ling a large, swinging axe.</p>
<p><strong>Other things in the wings</strong></p>
<p>On top of all that, there are still items in the backburner. Fixes/updates to redditbooru, especially the backend service. I majiggered the main part off of a cron job and into a node run task (initially to curb an issue I experienced after upgrading to php 5.5), but now that the code is there, I can multithread that bitch. On top of that, there are changes I&#39;d love to make to the music page, the music page physical controller I&#39;ve been tinkering with, and the iPhone app that I&#39;ve begun writing for it.</p>
<p>My plate is full of computery things for sure, despite what I say about laziness. I&#39;m probably heading straight for a burnout, but these things ebb and flow, and right now they&#39;re just flowing.</p>
<p>I guess you could say I&#39;m on my development period...</p>
</div></article><div class="paging"><a href="http://staticr.dxprog.com/archives/17.html" class="paging__link paging__link--next">Earlier Posts</a><a href="http://staticr.dxprog.com/archives/15.html" class="paging__link paging__link--previous">Later Posts</a></div></section><footer class="footer"><p class="footer__copyright">Copyright © 2018 Matt Hackmann</p></footer></section></body></html>