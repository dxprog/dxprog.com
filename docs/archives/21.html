<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Archives - Page 21 - Matt Hackmann</title><link rel="stylesheet" type="text/css" href="https://dxprog.com/static/css/index.css"/></head><body><section class="rollup-page"><section class="intro-bar intro-bar--small"><img src="https://dxprog.com/static/images/me.jpg" alt="Matt Hackmann" class="intro-bar__photo"/><h1 class="intro-bar__header"><a href="https://dxprog.com/" title="Back to home" class="intro-bar__home-link"><span class="intro-bar__name intro-bar__name--first">Matt</span><span class="intro-bar__name intro-bar__name--last">Hackmann</span></a></h1><h2 class="intro-bar__subhead">The thoughts and goings-on of some programmer dude.</h2><nav class="intro-bar__social-nav"><ul class="social-links"><li class="social-links__item"><a class="social-links__link social-links__link--rss" target="_blank" href="http://feeds.feedburner.com/dxprog">RSS Feed</a></li><li class="social-links__item"><a class="social-links__link social-links__link--github" target="_blank" href="https://github.com/dxprog">GitHub</a></li><li class="social-links__item"><a class="social-links__link social-links__link--twitter" target="_blank" href="https://twitter.com/dxprog">Twitter</a></li><li class="social-links__item"><a class="social-links__link social-links__link--linkedin" target="_blank" href="https://www.linkedin.com/in/mhackmann">LinkedIn Profile</a></li></ul></nav></section><section class="article-list"><article class="post"><header class="post__header"><h1 class="post__title"><a href="https://dxprog.com/entry/php-events-and-the-ajax-pipeline">PHP, Events, and the Ajax Pipeline</a></h1><time class="post__published">October 1, 2013</time></header><div class="post__content"><p>Working at LinkedIn, I feel almost required to talk about coding on my blog, especially if I want to keep my <a href="http://i.imgur.com/8ALLwfP.jpg">Junior Woodchuck Engineer</a> sash.</p>
<p>Some months ago, I was trying to beef up the user feedback that <a href="http://awwnime.redditbooru.com/">redditbooru</a> would give when making requests to the server. One thing I wanted to do was, during a reverse image lookup, have a continually updating status to the user. &quot;Retrieving image&quot;, &quot;Searching database&quot;, and then the final data. This required a couple of interesting things: implementing an event model in PHP, and the not-so-talked-about third readyState value in the XMLHttpRequest response: 3, or &quot;processing request&quot;.</p>
<h2 id="php-eventing">PHP Eventing</h2>
<p>Anybody who has coded JavaScript for more than thirty minutes will understand that it runs on a highly evented model. You attach a listener to an object with a function callback, the object fires and event, and the callback is called with data provided pertaining to the event in question. PHP, being a highly linear programming language, doesn&#39;t really have such a concept baked in. Being that I wanted something that could be easily reused through out an entire project, I came up with a stupid simple <a href="https://github.com/dxprog/reddit-booru/blob/master/lib/events.php">events library</a>. Pertaining to the internal event modelling, it exposes the following two methods:</p>
<pre><code class="lang-php"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addEventListener</span><span class="hljs-params">($eventType, $callback)</span></span>;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fire</span><span class="hljs-params">($eventType, $data = null)</span></span>;
</code></pre>
<p>These work essentially as they do in JavaScript: subscribe to an event with addEventListener and provide a callback. Fire an event with fire of that event type with whatever relevant information that goes with. addEventListener is constructed such that you can add multiple callbacks for a single event, much like the sugary goodness that jQuery provides to the DOM. One possible drawback of my implementation is that the event bus is essentially global, being that all the methods are static. This means you could have naming collisions on event types. Granted, this could easily be converted into an abstract class that any class could later inherit, providing this functionality.</p>
<p>Here are a couple of quick production examples of <a href="https://github.com/dxprog/reddit-booru/blob/master/api/image.php#L215">event firing</a> and <a href="https://github.com/dxprog/reddit-booru/blob/master/controller/images.php#L199">event subscribing</a>. One half of the puzzle solved.</p>
<h2 id="sending-and-parsing-evented-json">Sending and Parsing Evented JSON</h2>
<p>As stated previously, on modern browsers, the XMLHttpRequest response has a third ready state of &quot;processing request&quot;. Essentially, this fires at certain points as the request is receiving data. We can use this to our advantage to send small status updates to the user as the backend performs numerous/long running tasks. Part of the events library are some calls to handle what I refer to as &quot;evented Ajax&quot;, though I&#39;m sure there&#39;s a real term for it. It has the following methods:</p>
<pre><code class="lang-php"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">beginAjaxEvent</span><span class="hljs-params">()</span></span>;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">endAjaxEvent</span><span class="hljs-params">()</span></span>;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sendAjaxEvent</span><span class="hljs-params">($eventType, $data)</span></span>;
</code></pre>
<p>beginAjaxEvent and endAjaxEvent do essentially what you would expect: they prime the system for sending data out in this fashion and tidy everything up necessarily. sendAjaxEvent is where all the fun happens. I&#39;m going to go through this guy line by line.</p>
<pre><code class="lang-php"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sendAjaxEvent</span><span class="hljs-params">($eventType, $data)</span> </span>{
$out = <span class="hljs-keyword">new</span> stdClass;
$out-&gt;eventType = $eventType;
$out-&gt;data = $data;
$out = json_encode($out);

<span class="hljs-comment">// Pad out the request to a minimum of 4K for Chrome</span>
<span class="hljs-keyword">if</span> (strlen($out) &lt; <span class="hljs-number">4096</span>) {
$out = str_pad($out, <span class="hljs-number">4096</span>, <span class="hljs-string">' '</span>);
}
<span class="hljs-keyword">echo</span> $out;
flush();
}
</code></pre>
<p><strong>Line 3-7</strong> - pretty simple, preparing the data that will actually be sent to the browser as a JSON response.
<strong>Line 8-11</strong> - An oddity I ran into with Chrome while developing this. Apparently, it will only fire a processing event if the data received is 4K or greater. So, to ensure that the event is fired, we pad the response out to 4K at minimum.
<strong>Line 12-13</strong> - spit out the data and flush the buffer to the browser.</p>
<p>For the power this can wield, it&#39;s pretty simple stuff. Of course, you need to be properly set up to receive this type of response on the client end. Being as I&#39;m focusing on the PHP side here, I won&#39;t go into details, but <a href="https://github.com/dxprog/reddit-booru/blob/master/view/js/scripts.js#L78">you can check out my implementation</a>. The implementation is fairly tightly coupled with how it&#39;s piped out of PHP, particularly expecting the last and largest data coming down the pipe to be an event named &quot;data&quot;. But, I have yet to receive any user complaints that this doesn&#39;t work, so that&#39;s the important part.</p>
<p>Of course, all of this is nice and all, but this particular intrigue of onreadtstatechange isn&#39;t compatible on some browsers (cough, IE, cough). For that, there are fallbacks in place to use a standard Ajax request a la jQuery. By setting &quot;evented&quot; parameter on the URL to the request, the event model can be effectively turned on or off. The internal events are ignored, and what would be sent in the data event becomes the response. It&#39;s a gracefully degrading solution to the issue. Granted, that query string parameter could go away entirely if one was to do user agent sniffing on the backend.</p>
<p>Well, that&#39;s my little write-up on what was probably an afternoon of coding. I haven&#39;t yet implemented this anywhere else, but I think that at least the events model could have some (or a lot of uses) in many day to day cases, especially if you were to start messing around with multi-threading in PHP.</p>
<p>But that&#39;s a post for another day.</p>
</div></article><article class="post"><header class="post__header"><h1 class="post__title"><a href="https://dxprog.com/entry/the-plate-and-the-amount-of-stuff-on-it">My Plate and the Amount of Stuff On It</a></h1><time class="post__published">September 29, 2013</time></header><div class="post__content"><p>My mom decided to try out my month of one blog per day thing. I couldn&#39;t just take that sitting down, so here I am in a [mother disapproved word removed]-wagging contest, a contest which really doesn&#39;t exist.</p>
<p>I love to talk about how lazy I am. For instance, sometimes when I&#39;m hungry, I&#39;ll just continue being hungry because I don&#39;t want to stare into the cupboards and figure out what to make, or I just don&#39;t want to clean all the required hardware. Or perhaps there&#39;s just no food to be had. Either way, this is a thing that happens and it certainly has all the hallmarks of laziness.</p>
<p>But to say I&#39;m lazy overall isn&#39;t really true. I am selectively lazy. When it comes to programming tasks (or anything computer related, really) I&#39;m always up to something. At the moment, I&#39;m up to a lot of things.</p>
<p><strong>Work</strong></p>
<p>I have been working on and off all weekend trying to pump out a gratuitous amount of code in a stack that I have no business touching. During one of our team meetings, I set a bar for myself by telling everybody that I would take on a beefy amount of engineering work because I feel I have to prove myself (through many discussions with the people I work with, this is apparently incorrect thinking). That&#39;s actually only part of it; it seemed like a fun challenge. And this has shown to be more or less correct, as I&#39;ve lost some hours just pounding away at the keyboard. The long compile times aren&#39;t fun, but I&#39;ve learned a fuckton of stuff, both about how your <a href="http://www.linkedin.com/in/conanobrien">LinkedIn profile page</a> is pulled together, but also a bit about Java and a bit more about OOP. Besides, those compile times are easily whiled away by playing the <a href="http://en.wikipedia.org/wiki/Star_Trek:_25th_Anniversary_(NES_video_game">Star Trek: 25th Anniversary</a>) game for NES.</p>
<p>On top of that, there&#39;s a presentation I need to write pretty damn soon. I have been chosen to pitch web development at LinkedIn to a throng of up and comings at my alma mater next month. I haven&#39;t even started on that...</p>
<p><strong>Awwnime Bracket</strong></p>
<p>Last year&#39;s awwnime bracket only got a <a href="http://dxprog.com/entry/weekend-of-productivity/">couple</a> of <a href="http://dxprog.com/entry/a-cute-world-of-programming-possibilities/">nods</a> in the blog despite eating up nearly two solid months of my life. This year it&#39;s coming back, but we&#39;re also running an additional bracket for male characters (<a href="http://www.reddit.com/r/awwnime/comments/1n5q2t/2013_boys_bracket_round_1_group_a/">which came with it&#39;s own set of problems</a>). In an attempt to make things actually manageable, I spent some time into moving all my one off shell scripts into the code base proper and writing an administrative interface around that. Additionally, I moved away from the money sucking <a href="http://cdn.awwni.me.s3.amazonaws.com/bracket/bracket_round1_groupB.jpg?v7">giant images</a> and switch to something <a href="http://bracket.awwni.me/2013-boys-bracket/view/">rendered in browser</a>. It&#39;s also much friendlier to interactiveness that way.</p>
<p><strong>Freelance</strong></p>
<p>Despite the fact that I keep promising myself I&#39;ll never freelance again, the sweet allure of &quot;free money&quot; is too much. Now, the upside is I haven&#39;t had to bust my ass on any of the one (possible two) projects in the pipeline at this point, but still, they hang over me ling a large, swinging axe.</p>
<p><strong>Other things in the wings</strong></p>
<p>On top of all that, there are still items in the backburner. Fixes/updates to redditbooru, especially the backend service. I majiggered the main part off of a cron job and into a node run task (initially to curb an issue I experienced after upgrading to php 5.5), but now that the code is there, I can multithread that bitch. On top of that, there are changes I&#39;d love to make to the music page, the music page physical controller I&#39;ve been tinkering with, and the iPhone app that I&#39;ve begun writing for it.</p>
<p>My plate is full of computery things for sure, despite what I say about laziness. I&#39;m probably heading straight for a burnout, but these things ebb and flow, and right now they&#39;re just flowing.</p>
<p>I guess you could say I&#39;m on my development period...</p>
</div></article><article class="post"><header class="post__header"><h1 class="post__title"><a href="https://dxprog.com/entry/its-a-beautiful-night-to-watch-fireflys">It&#x27;s a Beautiful Night to Watch Firefly(s)</a></h1><time class="post__published">September 21, 2013</time></header><div class="post__content"><p><a href="http://cdn.awwni.me/mfsd.jpg"><img src="http://cdn.awwni.me/mfsd.jpg" alt=""></a></p>
<p>It&#39;s been over two years since I actually completed a full art piece, one if you take into consideration <a href="http://dxprog.com/comic/puntacular/">my last comic</a>. So, when I recently promised the fine folk of <a href="http://www.reddit.com/r/awwnime">/r/awwnime</a> some _OC_, I backed myself into the corner of actually having to draw something.</p>
<p>Around the same time I made that promise, I was introduced to a little show called <a href="http://www.crunchyroll.com/humanity-has-declined">Humanity Has Declined</a>. On the surface, it looks like one of those cute girl shows that I enjoy more than I&#39;d care to admit, but in reality, it&#39;s a dark satire. Watashi, our intrepid protagonist pictured above, is a girl who acts as the liaison between humans and the &quot;future humanity&quot;, or faeries. She&#39;s super cynical, which is awesome.</p>
<p>On the artwork itself, I&#39;m actually relatively at ease with this one. I feel like I avoided the usual lumpiness (and had Chris confirm that for me). I decided to take it easy on the shading for the sake of easiness, but also to mimic the style of the show. Very clean and simple. I like. You can also <a href="http://imgur.com/a/WKVlc">check out the process</a> to final product.</p>
<p>Not bad for two years of doing nothing.</p>
</div></article><article class="post"><header class="post__header"><h1 class="post__title"><a href="https://dxprog.com/entry/my-private-eyes-are-watching-you">[My] Private Eyes Are Watching You</a></h1><time class="post__published">September 8, 2013</time></header><div class="post__content"><p>A couple weeks back, I was hunting for the keys to the familial house, hoping that I could make my surprise appearance back to the midwest even more so by just showing up in the house. I never found those keys, but as I was digging I came across my old yearbooks from a time when I actually attended school; kindergarten through second grade, to be exact.</p>
<p>As I scanned the names of my old classmates, thoroughly surprised at just how many of them I had forgotten, I thought it would be fun to do a little experiment: see which ones I could track down online with any degree of confidence. Having gone to a rather expensive, private school, there were many kids of some affluence, so I assumed that quite a few of them would turn up. My thinking there being that they&#39;d all have gone to college and made something of themselves.</p>
<h2 id="the-method">The Method</h2>
<p>My method of performing this search was rather simple: open a private window in Chrome (to avoid any &quot;social&quot; cookies set in my normal browsing session), and search &#39;&quot;first last&quot; oklahoma&#39;. Some leads or additional information I knew would sometimes make me change this query, but it nearly always started there. Once I&#39;d perused no more than three pages of search results, I would rank them on my confidence that I had found a person and how prominent or easily they showed up in the search. These were ranked from low to confirmed. I also tried to note where I found them, what they were doing, and any personal remarks that came to mind. I used my second grade class as the data pool, a total of 28 &quot;kids&quot;.</p>
<h2 id="the-results">The Results</h2>
<p>The results are almost entirely not what I expected at all. People I expected to appear easily (due to their prominence in school and/or highly specific names) were nowhere to be found, while people I barely remember existing were quite prominent. A lot can happen in twenty years, I suppose. But number break downs:</p>
<p><strong>Confirmed</strong> - 18%, 5 people
<strong>High</strong> - 21%, 6 people
<strong>Medium</strong> - 4%, 1 person
<strong>Low</strong> - 54%, 15 people
<strong>&quot;Doesn&#39;t Exist&quot;</strong> - 4%, 1 person</p>
<p>My math is off on those percentages, but whatever. By and far, the most common place to find people was on LinkedIn. When you think about it, this makes sense as a person is more likely to use their real name on a place that&#39;s for professional networking. Also, LinkedIn is more public to search engines than, say, Facebook. Seven LinkedIn profiles I found, compared to two Facebook and one Google+ account.</p>
<p>Some of the notes I took (removing the names to protect the innocent):</p>
<p><strong>Female</strong> - lawyer, works in Tulsa on 1st street (literally, about two blocks from my old employer)
<strong>Female</strong> - works for Phillips, just got married
<strong>Male</strong> - politics, got handsome
<strong>Matt Hackmann</strong> - <a href="https://www.tlcvision.com/lasik-reviews-and-news/685/">https://www.tlcvision.com/lasik-reviews-and-news/685/</a> (this has got to be my greatest search result ever)
<strong>Male</strong> - web developer, super hairy
<strong>Female</strong> - doesn&#39;t like commas
<strong>Male</strong> - animator
<strong>Female</strong> - may have written a review for <a href="http://www.amazon.com/Polgara-Sorceress-Malloreon-David-Eddings/dp/0345422554/ref=sr_1_1?ie=UTF8&amp;amp;amp;qid=1378696304&amp;amp;amp;sr=8-1&amp;amp;amp;keywords=polgara+the+sorceress">Polgara the Sorceress</a>
<strong>Female</strong> - possible felon
<strong>Female</strong> - possibly getting married</p>
<p>Yes, I tossed myself in the list to see how well I would turn up in my search terms. Not the greatest, when you see that the search results are stuffed with white pages type results, and not even well enough to mark myself as confirmed as I couldn&#39;t place myself as having lived in Bartlesville.</p>
<p>That evening, I also found the phone number for an old crush I had at Walmart. I kind of want to use my Grand Central account to text her something creepy (If you are who I think you are, I know you and you know me... or at least, we once did...)</p>
<p>But we all know I can&#39;t approach women.</p>
</div></article><article class="post"><header class="post__header"><h1 class="post__title"><a href="https://dxprog.com/entry/retroreview-beauty-and-the-beast">RetroReview - Beauty and the Beast</a></h1><time class="post__published">August 18, 2013</time></header><div class="post__content"><p><img src="http://i.imgur.com/yYvkSe7.jpg" alt="" title="Beauty and the Beast"></p>
<p>For the first time in what has to be going on twenty years, I took some time this afternoon to watch <em>Beauty and the Beast</em>. It probably is in my top three movies in terms of times seen, having played the shit out of it when I was younger, one of those films that I had memorized and would recite nigh constantly. Interestingly enough, most of my memory of the dialog is gone. But, whatever. Review time.</p>
<p>Adapted from some Frenchie story, Beauty and the Beast is a pretty cliche movie about Stockholm Syndrome. Selfish prince is an asshole to the wrong person and gets turned into a beast with the stipulation that he can&#39;t be turned back until he gets somebody to love him. Enter sort of feminist Belle who wings up his prisoner but then realizes <em>hey, maybe he&#39;s not so bad</em>, falls in love with him and cue curtains. Per the fairy tale norm, all of this life changing shit happens in the span of a week, a month at most, and the spell is broken and they fuck like monkeys. It&#39;s super cliche and there&#39;s nothing I can say about this that can&#39;t be leveraged against every other romantic fairy tale in existence. What I want to focus on, being a connoisseur of the subject, are the technical aspects of the movie.</p>
<p>Now, being Disney and given the high regard this movie has, you would expect there to be a certain level of quality. Certainly, the production values are pretty high, but this film was riding on an era that was straddling the line between the animation techniques of yore and the world of modern movie making. My biggest issue with the movie was how out of place Belle (and in the end, the Princified Beast) were compared to the rest of the cast. They were drawn in a manner that closer resembled humans than everybody else (other humans included), who were all rendered in a highly caricatured, cartoon style. And to that point, that style fucking sucks. It had all the problems of the older Disney movies; odd modeling at certain angles, movement that seems not quite natural, and those lips... they&#39;re goddamned humongous and, for whatever reason, aren&#39;t even synced to the voices correctly far too often. I don&#39;t know if it&#39;s all my time spent behind anime (which certainly has its ups and downs), but I found these character designs to be meh at best and almost grotesque when off model.</p>
<p>This isn&#39;t a problem at all with the &quot;cartoon&quot; cast; their features are exaggerated and, as such, we expect their movements to be. To boot, there are some nice little design flairs that parallel their human forms. Lumiere&#39;s cowlick is a little fwip of melted wax, Cogsworth&#39;s clock hands mirror his mustache, and Mrs. Potts&#39; lid is a throwback to her little maid... hat... thing. The way these characters are animated in their non-human form is clever and you can tell the animators had fun with it. Even the Beast&#39;s animation was pulled off exceedingly well, full of lots of subtle nuance particularly in the facial expressions.</p>
<p>And then there&#39;s the CG. One of the big &quot;firsts&quot; of the time in this movie was the ballroom dance scene, in which the room was rendered entirely in computers. To say the least, it doesn&#39;t hold up. Sure, those big sweeping camera moves are nice, but the lighting on those pillars makes it looks like a low-budget children&#39;s show from today. You could also tell that a lot of establishing shots were at least put together in a computer, as the parallaxing of layers and panning was far and away too smooth looking for traditional animation. So smooth, in fact, that I almost felt like I was watching the Hobbit at 48fps all over again. The opening scene in particular was a major offender of this.</p>
<p>Oh, and then there&#39;s this...</p>
<p><img src="http://cdn.awwni.me/m9xd.gif" alt="" title="Round and round and round..."></p>
<p>There seem to be a lot of people who are entirely undecided on where they want to go...</p>
<p>Concluding, Beauty and the Beast certainly doesn&#39;t hold up as well now that I&#39;m considerably older. It has its entertaining moments for sure, with the pairs of Lumiere and Cogsworth and Gaston and Lefou having the majority of these, but in the end it&#39;s just another Disney fairy tale adaptation with all the cons that come with. You&#39;d think I&#39;d be more into this stuff what with the staggering amount of high school romcoms that I consume on a weekly basis, but these just don&#39;t do it for me.</p>
</div></article><div class="paging"><a href="https://dxprog.com/archives/22" class="paging__link paging__link--next">Earlier Posts</a><a href="https://dxprog.com/archives/20" class="paging__link paging__link--previous">Later Posts</a></div></section><footer class="footer"><p class="footer__copyright">Copyright © 2021 Matt Hackmann</p><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-280226-1"></script><script src="//dxprog.com/static/js/dxprog.js"></script></footer></section></body></html>