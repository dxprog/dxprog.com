<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Archives - Page 10 - Matt Hackmann</title><link rel="stylesheet" type="text/css" href="https://dxprog.com/static/css/index.css"/></head><body><section class="rollup-page"><section class="intro-bar intro-bar--small"><img src="https://dxprog.com/static/images/me.jpg" alt="Matt Hackmann" class="intro-bar__photo"/><h1 class="intro-bar__header"><a href="https://dxprog.com/" title="Back to home" class="intro-bar__home-link"><span class="intro-bar__name intro-bar__name--first">Matt</span><span class="intro-bar__name intro-bar__name--last">Hackmann</span></a></h1><h2 class="intro-bar__subhead">The thoughts and goings-on of some programmer dude.</h2><nav class="intro-bar__social-nav"><ul class="social-links"><li class="social-links__item"><a class="social-links__link social-links__link--rss" target="_blank" href="http://feeds.feedburner.com/dxprog">RSS Feed</a></li><li class="social-links__item"><a class="social-links__link social-links__link--github" target="_blank" href="https://github.com/dxprog">GitHub</a></li><li class="social-links__item"><a class="social-links__link social-links__link--twitter" target="_blank" href="https://twitter.com/dxprog">Twitter</a></li><li class="social-links__item"><a class="social-links__link social-links__link--linkedin" target="_blank" href="https://www.linkedin.com/in/mhackmann">LinkedIn Profile</a></li></ul></nav></section><section class="article-list"><article class="post"><header class="post__header"><h1 class="post__title"><a href="https://dxprog.com/entry/redditbooru-v2-postmortem">RedditBooru v2 - Postmortem</a></h1><time class="post__published">August 3, 2014</time></header><div class="post__content"><p>Back in January, I wrote a rather <a href="http://dxprog.com/entry/systems-architecture-in-the-unknown/">frustrated post</a> about rewriting RedditBooru on a new tech stack and how everything sucked. Six months (almost to the day) after that post, I finally launched the second major revision of the site. That launch was not without a whole bunch of drama.</p>
<h2 id="codebase-direction">Codebase Direction</h2>
<p>In the aforementioned post, I was originally developing on a stack consisting of nodejs and mongoDB. Shortly after, I abandoned nearly everything I had written, the only thing carried over being the few templates that were done. There were many lessons learned in that excursion, particularly &quot;if it ain&#39;t broke, don&#39;t rewrite it&quot;. I decided that instead of again rewriting everything from the ground up, I would work off of the existing codebase and retool that. This proved immediately to be the right idea, as I was able to quickly port many of the new things I&#39;d written in node to PHP but without any of the stability issues. The first of these was the cron job.</p>
<p>The nodejs version of the cron (which was more of a daemon than a cron, really) heavily used async operations which allowed it to index all sources very quickly, generally in a matter of seconds. PHP is by its nature not async friendly, so I employed some clever process management handled by node, something that I&#39;d casually thrown out as an option to resolve my node woes. The node manager keeps a pool of 4 indexer processes running, allowing for multiple sources to be indexed simultaneously in individual hardware threads but with all the benefits of synchronous code for each individual process. This proved to be rock solid right from the start, though did result in high CPU usage as I&#39;d noticed in the first few days after launch. It was enough of an issue that I dropped the maximum number of processes down to one. Turns out I was unnecessarily hammering MySQL for data, and by <a href="https://github.com/dxprog/reddit-booru/commit/1e331512f95f7c61b980573f155629c9cd75f66c">being smarter about my DB calls</a>, CPU usage was dropped almost to 0 and I was able to ramp back up to 4 processes while still utilizing less CPU than in the previous single running process.</p>
<p>One major change I did make to the front-end was to use <a href="http://backbonejs.org/">backbone</a> as my JS framework. The primary reason I did this was to familiarize myself with the MV* frameworks that have been all the rage lately and I know the day is coming when I&#39;ll need to know this stuff for work. The other reason was that it provided logical structure to my JS instead of haphazardly throwing everything into a single JS file. The only issues I had with the framework were around it&#39;s handling of routes, a chunk of code I eventually just <a href="https://github.com/dxprog/reddit-booru/blob/master/static/js/dev/controls/Routes.js">wrote myself</a> to suit my particular use cases. All in all, I&#39;m pretty happy with backbone, but I feel that I probably did not use it to its fullest advantage. I probably could&#39;ve gotten away with no framework and using something like <a href="https://github.com/linkedin/Fiber">Fiber</a> to give me a nice, classical style OOP scheme to work off of.</p>
<h2 id="release-day">Release Day</h2>
<p>So, development went pretty smoothly once I kept doing things I knew how to do. And everything was fine... right up until just before the hard date I&#39;d set for release (June 30th, in this case). A couple days before release, I went over my hosting bandwidth cap on the existing server, something that had been threatening to happen for months. I quickly began scrambling to figure how to route traffic to places where I wouldn&#39;t be paying the enormous overage fees I would be getting from my hosting. During all that, I made the decision that I should just spin the new redditbooru up on a new machine, one with much greater bandwidth caps. Many hours of file copying later, I had all of my sites on the new machine with traffic slowly diverting over there... except for redditbooru. Because of how it names hosted files, this would have to be transferred over last. And everything probably would have gone okay... if I hadn&#39;t forgotten one thing. As the traffic was shifting from the old machine to the new machine, there were weird anomalies showing up with pictures people had posted to reddit, namelyt different people were seeing different things for the same file. At this point, it should be mentioned that a user&#39;s DNS could be in one of four states:</p>
<ul>
<li>pointing to CloudFlare (which would be pointing to one of the following)</li>
<li>pointing to AWS</li>
<li>pointing to the old server</li>
<li>pointing to the new server</li>
</ul>
<p>My initial thoughts were that one or two things slipped through before I migrated the database from the old machine to the new machine. I had disabled uploading on the old one, so there shouldn&#39;t be any collisions. Except for the fact that I&#39;d forgotten to also turn off the indexer on the old box. This was causing the two separate machines to constantly overwrite each other&#39;s images on AWS and since their database IDs were very different, those images would be different as well. And, I was powerless to do anything while the DNS was propagating. Of course, the old indexer was shut down which resolved all issues going forward and I overwrote all the bad images on AWS using the new machine as the source of truth, but it was still a waiting game as that DNS finished up so I could turn off the old server.</p>
<p>It was a hellacious couple of days and I&#39;m honestly surprised anybody still trusted my software after that.</p>
<h2 id="one-month-later">One Month Later</h2>
<p>It&#39;s now one month later and things have finally smoothed out. Of course, there are still some issues I&#39;ve been experiencing with the new software and new machine. For instance, all sites on that machine stopped working a week or two ago. Turns out that MariaDB had enabled binary query logging by default and had exhausted all of the available disk space (some 77GB of logs). MongoDB, which I&#39;d relegated to image caching and internal metrics logging, also just fucking died a couple times, bringing all of RB with it. I&#39;ve since disabled mongo and migrated the image caching to a <a href="https://github.com/dxprog/reddit-booru/commit/1c15499f6c21d98de695cb571640a2cba6cd210a">simple disk based system</a>. This leaves me in a bit of a bind as many features I had planned were going to use mongo for a denormalized data store (stats type things, mostly). I&#39;m currently looking into redis as a possible way replacing this.</p>
<p>All that said, RedditBooru is healthy now and people are taking advantage of the new features built in, particularly the inline image viewer. That feature is so popular that time-on-site has jumped a full minute and my bandwidth for last month approached 6TB, a full 2TB over what my previous bandwidth cap. This is again going to fast become a major issue, one that needs resolving pretty quickly.</p>
<p>I think overall what I can take away from this whole experience is that calm works makes for higher quality work. Panic only brings additional pain.</p>
</div></article><article class="post"><header class="post__header"><h1 class="post__title"><a href="https://dxprog.com/entry/not-lost-but-certainly-forgotten">Not lost, but certainly forgotten</a></h1><time class="post__published">July 27, 2014</time></header><div class="post__content"><p>Somehow, I found myself poking around in the darker corners of my backup drive today. I don&#39;t even remember the original reason I hooked the thing up, but as is wont to happen, I headed in a downward spiral into my past. I like to use these things as a measuring stick to measure not only my progress as a professional, but also as a person. To that latter point, the jury&#39;s out on whether I&#39;ve changed at all...</p>
<p><img src="http://i.imgur.com/Tsh0Dhx.jpg" alt="" title="Somewhere in the early days of my Narutard phase">
Somewhere in the early days of my Narutard phase</p>
<p><img src="http://i.imgur.com/GcpJjBO.jpg" alt="" title="I&#39;d like to say this was borne from a conversation with my mom. I am the babby.">
I&#39;d like to say this was borne from a conversation with my mom. I am the babby.</p>
<p><img src="http://i.imgur.com/AuryTJz.jpg" alt="" title="This picture of my little sister never fails to entertain">
This picture of my little sister never fails to entertain</p>
<p><img src="http://i.imgur.com/PQkEu43.jpg" alt="" title="The only upside I see to this one is that I can tell I&#39;ve lost weight since...">
The only upside I see to this one is that I can tell I&#39;ve lost weight since...</p>
<p><img src="http://i.imgur.com/4bbLrrZ.jpg" alt="" title="Getting tired of all this Impact...">
Getting tired of all this Impact...</p>
<p><img src="http://i.imgur.com/OUiA987.jpg" alt="" title="And a rage comic. So 2011">
And a rage comic. So 2011</p>
<p>To be fair, there are some interesting things I ran across that I&#39;d like to feature sometime. But, that&#39;d be too much effort and I&#39;m more about the self-deprecation.</p>
</div></article><article class="post"><header class="post__header"><h1 class="post__title"><a href="https://dxprog.com/entry/gravity-my-enemy">Gravity, My Enemy</a></h1><time class="post__published">July 8, 2014</time></header><div class="post__content"><p><a href="https://cmimg.dxprog.com/cm_20140708_7.png"><img src="https://cmimg.dxprog.com/cm_20140708_7.png" alt=""></a></p>
<p>If there&#39;s one thing I&#39;ve learned since I came to California, it&#39;s that my limbs will find any way they can to test gravitational physics on any item close to them.</p>
</div></article><article class="post"><header class="post__header"><h1 class="post__title"><a href="https://dxprog.com/entry/to-become-the-most-boring-person-i-can-be">To Become the Most Boring Person I Can Be</a></h1><time class="post__published">April 5, 2014</time></header><div class="post__content"><p>This blog has once again fallen into dusty shambles. So, I&#39;m going to kick in another post-a-day type experiment... starting tomorrow.</p>
<p>What I&#39;m going to do is keep a daily log for a week, but instead of my usual type rambling, it&#39;ll be just 100% facts, completely devoid of emotion, opinion, or adjectives/adverbs (using as few as possible). A little something like this:</p>
<blockquote>
<p>I woke up at 10:15am this morning. I didn&#39;t actually want to leave my bed, so I fished my iPad out from under my bed and checked my email, Facebook, and reddit. I decided to make German potato salad today but lacked all the ingredients required. After deliberation, I decided I would bike. I geared up, but after getting out the door noticed that my back tire was again low. I put the bike back in my apartment and took the car instead. Since I was no longer worried about distance or the roads I would need to take, I went to Safeway because they have a better selection of food than Target. Once at the store, I purchased potatoes, scallions, bacon, and white wine vinegar. After returning home, I cleaned a large pot to boil the potatoes in. They are currently boiling now.</p>
</blockquote>
<p>Seems a bit like those old <a href="http://dxprog.com/entry/the-me-of-yore-part-1/">journal entries of mine, no?</a>. For contrast, here&#39;s how I&#39;d rewrite the first couple of sentences.</p>
<blockquote>
<p>Given that I&#39;m only half way into this day, I would label it as almost entirely ordinary. Consciousness began to return to me somewhere around 10:15a, about an hour later than my usual 9a (largely thankful to my late night of playing Danganronpa, no doubt). Despite the lateness, I didn&#39;t feel like leave the warm comforts of my bed, so I grabbed my iPad (generally kept beneath my bed) to entertain myself with. I did a quick check of my email, Facebook, and skimmed reddit. Despite Alien Blue being a pretty nice app, I don&#39;t like to &quot;deep dive&quot; into my usual subreddits on a mobile device because I feel the experience would be diminished on a small screen (moe must be observed with as many pixels as possible).</p>
</blockquote>
<p>So, yeah. That&#39;s a thing I&#39;m going to do because I&#39;m otherwise bored and have little to write about (or am not willing to expend the effort in doing so).</p>
</div></article><article class="post"><header class="post__header"><h1 class="post__title"><a href="https://dxprog.com/entry/head-sensations">Head Sensations</a></h1><time class="post__published">March 20, 2014</time></header><div class="post__content"><p>I&#39;d been considering writing a blog post on this subject for some time, but balked because it seemed an odd thing to talk about. But, after the topic came up at lunch not long ago, I figured why not. Besides, I need to post something this month as I&#39;ve not missed posting at least one thing per month since August 2010. Gotta keep the streak alive.</p>
<p>The aforementioned topic is a physical sensation that&#39;s been dubbed on the internet as &quot;ASMR&quot;, or &quot;autonomous sensory meridian response&quot;.It&#39;s honestly a really shitty name and I thought the original idea of &quot;brain orgasm&quot; explained it better, but the <a href="http://www.reddit.com/r/asmr">community</a> doesn&#39;t take kindly to that since it&#39;s not a sexual thing. To actually describe the feeling is a bit difficult as there&#39;s nothing really to relate it to. The usual description is &quot;head tingles&quot; and, while that&#39;s not entirely untrue, it doesn&#39;t seem quite accurate either. I&#39;d describe it more as a feeling of mild pressure sensation on the top and back of the scalp that will at times &quot;bloom&quot; in intensity across the scalp in response to stimuli. Yes, there are also tingles.</p>
<p>What triggers this seems to be hit and miss. Slow, steady, soft speech patterns or rustling noises can do it, so does close personal attention such as a visit to the eye doctor. The aforementioned community is a subreddit that deals in posting videos that cause this sensation for people. These generally range from creepy videos of people whispering things into a microphone to creepy videos of people making various noises with various things or sometimes role play videos that are a mix of the two. There&#39;s no getting around the creepy factor, because it is and doubly so if you don&#39;t know what the fuck is going on.</p>
<p>As for myself and my history with this... condition(?), I&#39;ve had it for as long as I can remember. I recall fairly well the first time I actually tried to vocalize it to somebody. One of my cousins and I were coloring at my grandma&#39;s house and I said something about tickles in my brain. I believe I was six or seven at the time. My young self would try to figure out ways of inducing the &quot;tingles&quot;, at one point settling on raising and lowering my eyebrows repeatedly in erratic patterns (the results were mixed).</p>
<p>As I rolled into my later teen years, I kind of forgot about whole thing except when I would go to the optometrist. It wasn&#39;t until mid-2012 when I saw an ad for the subreddit that it was brought back to my attention and a little bit of perspective put on the whole thing. Having been tuned back into the phenomenon and having a better idea of how to trigger it, I tested the waters with the creepy videos and, though it&#39;s hit and miss, they work. Now, late in the evening, I&#39;ll often put one of those videos on, lay down on my bed or the couch with my earbuds in, and take a train to Relaxation Town.</p>
<p>It&#39;s quite nice, really.</p>
</div></article><div class="paging"><a href="https://dxprog.com/archives/11" class="paging__link paging__link--next">Earlier Posts</a><a href="https://dxprog.com/archives/9" class="paging__link paging__link--previous">Later Posts</a></div></section><footer class="footer"><p class="footer__copyright">Copyright © 2018 Matt Hackmann</p></footer></section></body></html>